Description
===========

Solution for [Hola JS Challenge Summer 2017: JSDash](https://github.com/hola/challenge_jsdash).

Tests
=====

**Environment:**
```
$ ec2metadata --profile
default-hvm
$ ec2metadata --instance-type
c3.large
$ ec2metadata --availability-zone
eu-west-1a
$ lsb_release -r
Release:	14.04
$ nodejs --version
v8.1.3
```

Results
=======

- Q - quited
- K - killed
- E - error

Final
-----

### acf31d5e53f853e5a14e88dccd50fd4421b29995 (HEAD)

|       Seed | Sco | Streak | But/Tot | Diam | Drop | Max |   Res  |
| ---------: | --: | -----: | ------: | ---: | ---: | --: | :----: |
|  826954869 | 277 |     39 |     2/3 |   47 |    0 |  85 |  K 516 |
|  113691004 |  37 |     11 |     0/3 |   11 |    1 | 103 | Q 1156 |
| 3925147649 | 129 |     24 |     0/3 |   28 |    0 |  92 |  K 443 |
|  656456903 | 279 |     41 |     0/3 |   43 |    0 |  75 |        |
| 3442529895 |  75 |     17 |     0/3 |   19 |    1 | 145 | Q 1083 |
| 4081869093 | 127 |     27 |     0/3 |   29 |    0 |  72 |  K 940 |
| 3845481085 | 116 |     18 |     1/3 |   32 |    1 | 156 |  K 553 |
|  304070271 | 131 |     23 |     1/3 |   23 |    0 |  83 | K 1111 |
| 3034053664 | 205 |     36 |     1/3 |   37 |    4 | 137 |  Q 973 |
|   87289870 | 125 |     27 |     0/3 |   27 |    3 | 111 | K 1011 |
| 4254894498 | 193 |     27 |     2/3 |   45 |    1 | 105 |  K 793 |
| 3806693609 | 198 |     27 |     1/3 |   49 |    2 | 141 |  K 734 |
| 3034793830 | 319 |     39 |     3/3 |   55 |    0 |  85 |  K 910 |
| 4253775517 | 134 |     28 |     0/3 |   33 |    1 | 127 |  K 970 |
| 1010559526 | 231 |     32 |     1/3 |   45 |    3 | 134 |  K 542 |
| 2456400543 | 203 |     33 |     1/3 |   35 |    2 | 109 |  K 851 |
| 3287234924 | 199 |     31 |     1/3 |   31 |    1 | 101 | K 1040 |
| 4147105045 | 124 |     26 |     0/3 |   26 |    1 | 127 | K 1041 |
|   53150700 | 271 |     30 |     2/3 |   49 |    0 |  91 |        |
| 2736619877 |  14 |      6 |     0/3 |    6 |    0 |  74 | K 1151 |

Total score: 3387

Pre 2
-----

### 2dcb3369cf950efbbb4d3266f70f261653135192

| Seed | Sco | Streak | But/Tot | Diam | Drop | Max |   Res  |
| ---: | --: | -----: | ------: | ---: | ---: | --: | :----: |
| 1066 | 480 |     55 |     2/3 |   66 |    0 |  76 |        |
| 1145 | 397 |     51 |     2/3 |   51 |    0 |  74 |        |
| 1222 | 235 |     40 |     0/3 |   40 |    0 |  97 |  K 881 |
| 1301 | 218 |     26 |     1/3 |   51 |    9 | 129 |  Q 937 |
| 1378 | 233 |     38 |     0/3 |   38 |    0 |  73 |  K 973 |
| 1456 | 130 |     28 |     0/3 |   32 |    1 | 110 |   K 1  |
| 1531 | 259 |     33 |     1/3 |   52 |    0 |  78 |  K 681 |
| 1607 | 149 |     19 |     0/3 |   35 |    1 | 108 |   K 1  |
| 1682 | 210 |     28 |     1/3 |   46 |    0 |  94 |  K 949 |
| 1758 | 216 |     33 |     0/3 |   43 |    7 | 143 |  Q 947 |
| 1835 | 244 |     39 |     1/3 |   39 |    1 | 107 | K 1009 |
| 1910 | 127 |     26 |     0/3 |   29 |    1 | 110 | K 1015 |
| 1986 | 199 |     15 |     3/3 |   50 |    0 |  72 |        |

Total score: 3097

### 57bfe4fbfdd27a7456d2ec77212b5928d6261dda

| Seed | Sco | Streak | But/Tot | Diam | Drop | Max |   Res  |
| ---: | --: | -----: | ------: | ---: | ---: | --: | :----: |
| 1066 |     |        |         |      |      |     |    E   |
| 1145 | 406 |     50 |     3/3 |   50 |    0 |  77 |        |
| 1222 | 385 |     49 |     1/3 |   49 |    0 |  75 |        |
| 1301 | 387 |     48 |     1/3 |   51 |    8 | 143 |  Q 961 |
| 1378 | 232 |     37 |     0/3 |   37 |    0 |  76 | K 1015 |
| 1456 | 130 |     28 |     0/3 |   32 |    3 | 103 |   K 3  |
| 1531 | 262 |     33 |     1/3 |   52 |    0 |  96 |  K 772 |
| 1607 | 207 |     19 |     2/3 |   47 |    1 | 105 |   K 1  |
| 1682 | 210 |     28 |     1/3 |   46 |    0 |  97 |  K 725 |
| 1758 | 388 |     52 |     1/3 |   52 |    1 | 133 |  Q 962 |
| 1835 | 251 |     40 |     1/3 |   43 |    0 |  88 |        |
| 1910 | 168 |     28 |     1/3 |   42 |    4 | 120 |  Q 933 |
| 1986 | 298 |     42 |     2/3 |   42 |    0 |  72 |        |

Total score: 3324

### c17294cbf3a82a0f200bfe993cff5c6fce582a2a

| Seed | Sco | Streak | But/Tot | Diam | Drop | Max |  Res  |
| ---: | --: | -----: | ------: | ---: | ---: | --: | :---: |
| 1066 | 327 |     46 |     0/3 |   48 |    1 | 102 |  K 1  |
| 1145 | 406 |     49 |     3/3 |   50 |    0 |  78 |       |
| 1222 | 235 |     39 |     0/3 |   40 |    0 |  75 | K 451 |
| 1301 | 307 |     37 |     2/3 |   53 |    1 | 104 | Q 947 |
| 1378 | 233 |     37 |     0/3 |   38 |    0 |  75 | K 733 |
| 1456 | 130 |     28 |     0/3 |   32 |    0 |  81 |       |
| 1531 | 254 |     33 |     1/3 |   47 |    0 |  79 |       |
| 1607 | 120 |     17 |     0/3 |   35 |    0 |  84 |       |
| 1682 | 163 |     27 |     1/3 |   37 |    0 |  78 | K 669 |
| 1758 | 192 |     22 |     0/3 |   42 |    1 | 104 | K 961 |
| 1835 | 251 |     40 |     1/3 |   43 |    0 |  76 |       |
| 1910 | 135 |     27 |     0/3 |   34 |    9 | 121 | K 911 |
| 1986 | 298 |     42 |     2/3 |   42 |    0 |  68 |       |

Total score: 3051

Pre 1
-----

### 2dcb3369cf950efbbb4d3266f70f261653135192


| Seed | Sco | Streak | But/Tot | Diam | Drop | Max |   Res  |
| ---: | --: | -----: | ------: | ---: | ---: | --: | :----: |
|    2 | 110 |     22 |     0/3 |   27 |    1 | 122 | Q 1025 |
|    8 | 165 |     30 |     0/3 |   35 |    1 | 101 |   K 1  |
|   20 | 327 |     46 |     0/3 |   48 |    0 |  76 |  K 919 |
|   28 | 218 |     23 |     1/3 |   46 |    0 |  80 |  K 824 |
|   50 | 196 |     32 |     0/3 |   35 |    0 |  98 |  K 924 |
|   82 | 339 |     43 |     1/3 |   47 |    0 |  95 |  K 656 |
|  126 |  94 |     16 |     0/3 |   29 |    0 |  89 |        |

Total score: 1449

### 57bfe4fbfdd27a7456d2ec77212b5928d6261dda

| Seed | Sco | Streak | But/Tot | Diam | Drop | Max |  Res  |
| ---: | --: | -----: | ------: | ---: | ---: | --: | :---: |
|    2 | 105 |     22 |     0/3 |   27 |    6 | 146 | Q 994 |
|    8 | 165 |     30 |     0/3 |   35 |    0 |  92 |       |
|   20 | 345 |     46 |     2/3 |   46 |    0 |  81 |       |
|   28 | 218 |     23 |     1/3 |   46 |    0 |  74 | K 824 |
|   50 | 290 |     41 |     1/3 |   44 |    5 | 119 | K 924 |
|   82 | 272 |     29 |     2/3 |   50 |    0 |  80 |       |
|  126 | 114 |     16 |     2/3 |   29 |    0 |  84 |       |

Total score: 1509


### c17294cbf3a82a0f200bfe993cff5c6fce582a2a

| Seed | Sco | Streak | But/Tot | Diam | Drop | Max |   Res  |
| ---: | --: | -----: | ------: | ---: | ---: | --: | :----: |
|    2 | 104 |     20 |     0/3 |   26 |    2 | 117 | Q 1012 |
|    8 | 193 |     34 |     0/3 |   35 |    0 |  75 |  K 790 |
|   20 | 458 |     47 |     3/3 |   63 |    0 |  78 |        |
|   28 | 218 |     23 |     1/3 |   46 |    0 |  80 |  K 824 |
|   50 | 149 |     23 |     0/3 |   36 |    0 |  75 |  K 753 |
|   82 | 272 |     29 |     2/3 |   50 |    0 |  76 |        |
|  126 |  94 |     16 |     0/3 |   29 |    0 |  78 |        |

Total score: 1488

TODO
----

- [x] Make player move "0"s.
- [x] Fix worker execution mode.
- [x] Calc ways to 2 targets ahead to prevent to be killed when got 1st target (seed 82, 126).
- [x] What to do with diamonds that are moving? They can kill us (seed 8).
- [x] Optimize performance of all places which are using Iterators.
- [x] maxStatesPerControl for c3.large.
- [x] Kill butterflies.
- [ ] Optimize movements for streaks.
- [ ] Best first search ?
- [ ] 1607 seed weird right bottom corner.

Old local results
=================

- T - timeout
- F - frozen
- S - skips
- K - kills

Pre 1
-----

|total|2      |8  |20     |28   | 50     | 82  |126   |
|:---:|-------|---|-------|-----|--------|-----|------|
|86abb554b4565599a918d721275b8d36633ef8c2             |
|295  |96     |0  |22     | 83  | 73     | 7   |14    |
|bbcabc116f1a05eb316fbb41102106931df3149c             |
|542  |96     |196|74     | 83  | 73     | 6   |14    |
|6551350b90907ae02cb997f55db92db95f87b19f             |
|933  |108    |0  |458    | 218 | 128    | 7   |14    |
|0b6a37fecd154c1e5ca4bb41c54605a4e4f55556             |
|1553 |104 (F)|193|458    | 218 | 194    | 272 |114   |
|0b6a37fecd154c1e5ca4bb41c54605a4e4f55556             |
|1335 |125    |165|345 (F)| 218 | 96 (K) | 272 |114   |

Pre 2
-----

|total |1066   | 1145 | 1222 | 1301    | 1378     | 1456 |1531      | 1607  |1682   | 1758    | 1835   | 1910    | 1986   |
|:----:|-------|------|------|---------|----------|------|----------|-------|-------|---------|--------|---------|--------|
|c17294cbf3a82a0f200bfe993cff5c6fce582a2a (c3.large)                                                                      |
| 3051 |327    |406   | 235  | 307 (T) |  233     | 130  |  254 (F) | 120   |  163  | 192 (F) | 251    | 135 (S) | 298    |
|c17294cbf3a82a0f200bfe993cff5c6fce582a2a (c3.large)                                                                      |
| 3468 |327    |406   | 385  | 237     |  232 (K) | 130  |  262     | 207   |  210  | 388     | 251    | 135     | 298    |
|c17294cbf3a82a0f200bfe993cff5c6fce582a2a (c3.large)                                                                      |
| 3468 |327    |254   | 383  | 239     |  233     | 130  |  265     | 139   |  179  | 278     | 73 (F) | 135     | 157    |
